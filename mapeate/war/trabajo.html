<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    	<meta name="author" content="Gorkas Company" />
	    <meta name="keywords" content="sistemas web, mapeate, trabajo, JSON, investigaci&oacute;n" />
	    <meta name="description" content="Una ayuda al uso y entendimiento del lenguaje de
	    								  marcado ligero JSON." />
	    
		
		<title>JSON</title>
		
		<link rel="icon" type="image/png" href="favicon.ico" />
		<link href="css/trabajo.css" rel="stylesheet" type="text/css" />		
	
	</head>


<body>

<div id="principal">

	<div id="cabecera">
		
		<h1>JavaScript Object Notation</h1>
	
		<a id="inicio"></a>
		<br/>
		<h2>Introducci&oacute;n a JSON</h2>
		<br/><br/>
	</div>

	<div id="menu">
	 <ul id="listMenu">
	  <li><a href="#DescrJson">Descripci&oacute;n JSON</a></li>
	  <li><a href="#EjemBasic">Ejemplos B&aacute;sicos</a></li>
	  <li><a href="#ParserJson">Funci&oacute;n eval() y JSON.parse()</a></li>
	  <li><a href="#SeguridadJson">Seguridad en JSON</a></li>
	  <li><a href="#ValidJson">Validadores JSON</a></li>
	  <li><a href="#CompXML">Comparaci&oacute;n con XML</a></li>
	  <li><a href="#YAML">YAML, subconjunto de JSON</a></li>
	  <li><a href="#JavaJson">JAVA y JSON</a></li>
	  <li><a href="#Referencias">Referencias</a></li>
	 </ul>
	</div>


  <div id="cuerpo">

	<a id="DescrJson"></a>
	<p class="Titulos">Descripci&oacute;n JSON</p>
	<p>JSON, acr&oacute;nimo de JavaScript Object Notation, es un formato ligero para el intercambio de datos
	e independiente de cualquier lenguaje de programaci&oacute;n.
	
	De esta manera hay muchos lenguajes que soportan esta notaci&oacute;n, como son Java, C/C++, ActionScript,
	JavaScript,Python,Ruby,PHP, entre otros.
	
	Su uso m&aacute;s com&uacute;n es para buscar informaci&oacute;n de un servidor web, as&iacute; como la formaci&oacute;n
	de objetos JavaScript, ya que JSON es un subconjunto de la notaci&oacute;n literal de objetos de JavaScript que no 
	requiere el uso de XML. Es decir, es una forma f&aacute;cil y r&aacute;pida de representar objetos en el lado
	del cliente.
	
	Gracias a su sencillez es un formato que se ha ido extendiendo, y es muy usado como alternativa al XML.</p>
	
	<a id="EjemBasic"></a>
	<p class="Titulos">Ejemplos B&aacute;sicos</p>
	<p>Aqu&iacute; va una breve gu&iacute;a de como se forma y estructura un JSON b&aacute;sico</p>

		<ul id="listado">
			 <li>Los distintos objetos se encapsulan con llaves { }, conteniendo en
			 				su interior una colecci&oacute;n de pares nombre/valor</li>
			 <li>Los datos se separan por comas</li>
			 <li>Los arrays se indican con corchetes: [ ]</li>
			 <li>Variables booleanas se representan con las palabras reservadas
			 				true y false en min&uacute;scula</li>
			 <li>Variables nulas se representan con null (minu&iacute;cula tambi&eacute;n)</li>
			 <li>JSON usa sint&aacute;xis JavaScript</li>
			 <li>La extensión más com&uacute;n para estos archivos es .json</li>
		</ul>
		
		<br/>
		<p class="tituloSecundario">Tipos de datos: </p><br/>
		<p class="code">	
				String (Cadenas de texto)<br/>
				number <br/>
				object <br/>
				char (caracteres unicode v&aacute;lidos)<br/>
				array (colecci&oacute;n de valores)<br/>
				null <br/>
				boolean (true o false) 	<br/>	
		</p>
		
		<br/>
		
		<p>Se estructura de este estilo: </p><br/>
		
		<p class="code">
			{&nbsp;&ldquo;objeto"&nbsp;:&nbsp;valor&nbsp;}
		</p>
		
		<br/>
		
		<p>Ejemplo: </p><br/>
		
		<p class="code">
			{&nbsp;&ldquo;ciudad"&nbsp;:&nbsp;"Oviedo"&nbsp; }
		</p>
		
		<p>Esto ser&iacute;a un ejemplo del formato en XML: </p><br/>
		<pre class="code" >
			&lsaquo;?xml version="1.0" encoding="UTF-8" ?&rsaquo;
			&lsaquo;ciudades&rsaquo;<br/>
			   &nbsp; &nbsp;&lsaquo;ciudad id&#61;&ldquo;0&rdquo;&rsaquo;Madrid&lsaquo;&#47;ciudad&rsaquo;<br/>
			   &nbsp; &nbsp;&lsaquo;ciudad id&#61;&ldquo;1&rdquo;&rsaquo;Londres&lsaquo;&#47;ciudad&rsaquo;<br/>
			   &nbsp; &nbsp;&lsaquo;ciudad id&#61;&ldquo;2&rdquo;&rsaquo;Berl&iacute;n&lsaquo;&#47;ciudad&rsaquo;<br/>
			&lsaquo;&#47;ciudades&rsaquo;
		</pre>
		
		<p>Y esto un equivalente libre en JSON: </p>
		
		<pre class="code">
		
			{"ciudades":[   
			  { "id": "0", "nombre": "Madrid" }  
			  ,  
			  { "id": "1", "nombre": "Londres" }  
			  ,  
			  { "id": "2", "nombre": "Berlín" }  
			]}
		
		</pre>
		
		
		
		<p>En el apartado <a href="#CompXML">Comparaci&oacute;n con XML</a> se detallan las diferencias.</p><br/>
		
		<p>Otro ejemplo: </p><br/>
		
		<pre class="code">
		
			  {"personas":[
					{ "nombre":"Juan" , "apellido":"Perez" },
					
					{ "nombre":"Ana" , "apellido":"Garcia" },
					
					{ "nombre":"Pedro" , "apellido":"Paramo" }
			  ]}
			  		
		</pre>
		
		<p>Se observa el ahorro en etiquetas y su sencillez, entre otras caracter&iacute;sticas.</p>
		
		<br/>

	
	<a id="ParserJson"></a>
	<br/>
	<p class="Titulos">La funci&oacute;n eval() y JSON.parse()</p>

	<p>La funci&oacute;n: eval() facilita la conversi&oacute;n de un texto Json en un objeto JavaScript,
	para el posterior uso de esos datos en web.</p>

	<p>Un ejemplo del uso de esta funci&oacute;n usando el JSON de las ciudades indicando arriba ser&iacute;a :</p><br/>
	<pre class="code">
	 
		  var json = eval ( {"ciudades":[ 
		  
		  		{ "id": "0", "nombre": "Madrid" },
		  
		  		{ "id": "1", "nombre": "Londres" }]} ); 
		  	  
		  alert(json.ciudades[0].nombre); 		
	
	</pre>
		<p class="tituloSecundario">Se muestra un mensaje de alerta con el contenido Madrid</p>
	<br/>
	
	<p>Pero esto puede producir ciertos <a href="#SeguridadJson">problemas de seguridad</a>, por los que surge
	la funci&oacute;n JSON.parse() que permite analizar y convertir s&oacute;lo el c&oacute;digo JSON.
	La forma de usar esta funci&oacute;n es similar a eval(), y es tan sencillo como usar el script <span>json.js</span>
	en el &lsaquo;head&rsaquo;<a href="download/json.rar">Descarga aqu&iacute; el js y el php.</a></p>
	
		<pre class="code">
		
			&lsaquo;script type="text/javascript" src="json.js" &rsaquo;&lsaquo;/script&rsaquo;
			
			var ciudad = JSON.parse(strCiudad);
		
		</pre>
		
	<p>Para conseguir el efecto contrario, convertir objetos JavaScript en un String JSON, se usa
	el m&eacute;todo <span>stringify</span></p>
	
		<pre class="code">
		
			var oCiudad = new Object{};
            
		    oCiudad.afiliados = 1400000;
		      
		    oCiudad.enUE = true;
		      
		    oCiudad.pueblos = new Array("Algete", "Alcobendas", "Getafe");
		      
		    document.write(JSON.stringify(oCiudad));
		
		</pre>
		
		
	<p>Y en el caso de un objeto PHP se usar&aacute; el m&eacute;todo <span>encode()</span> para pasar a 
	JSON, y <span>decode()</span> para el efecto contrario. A continuaci&oacute;n un ejemplo e info complementaria
	en <a href="http://php.net/manual/es/book.json.php">http://php.net/manual/es/book.json.php</a>:</p>
	
		<pre class="code">
			
			&lsaquo;?php
			     
			      class Persona { 
          
        			var $nombre;   
        			var $edad;    
        
       				function Persona($nombre, $edad){
    
						$this->nombre = $nombre;
		 	
						$this->edad = $edad;     
  
      
       				}

      
      			  }
      
      			require_once ("JSON.php");
      
        		$oJSON = new JSON();
      
        		$oPersona = new Persona("Miguel", 26);
              
        		$sSalida = $sJSON->encode($oPersona);

				echo $sSalida;
		
			?&rsaquo;
			

		Mostrando:

			{"nombre":"Miguel","edad":26}


		El caso del decode() es la misma idea.
		
		
		</pre>
		
		
	<p>Tambi&eacute;n existe la opci&oacute;n de parsear JSON desde jQuery usando las funciones
	<span>jQuery.parseJSON(json) y  jQuery.getJSON([...]).</span></p>
	
	
	<a id="SeguridadJson"></a>
	
	<p class="Titulos">Posibles problemas de seguridad</p>
	
	<p>Pero el problema de &eacute;sta funci&oacute;n es la seguridad, ya que si se introduce una instrucci&oacute;n
	JavaScript se ejecutar&aacute; ya que no se lleva a cabo ning&uacute;n parseo de depuraci&oacute;n. Es decir,
	si en JSON se cargase una instrucci&oacute;n de ataque, &eacute;sta ser&iacute;a ejecutada.</p>
	<p>Una posible soluci&oacute;n es el uso de la librer&iacute;a <a href="http://prototypejs.org/learn/json">Prototype.js</a></p>
		<ul>
			<li>convierte objetos javascript en objetos JSON, usando el m&eacute;todo Object.toJSON.</li>
			<li>parsea cadenas evalu&aacute;ndolas en objetos JSON, mediante el uso del m&eacute;todo String.evalJSON</li>
		</ul>
	
	

<a id="ValidJson"></a>
<br/>
<p class="Titulos">Validadores JSON</p>

<p>As&iacute; como hay validadores de XHTML ,CSS y demás lenguajes de marcado, JSON no es
diferente. Hay muchas webs que se encarga de esta labor esencial para saber si
se est&aacute; haciendo todo como se debe:</p>

	<a class="centrado" href="http://www.freeformatter.com/json-validator.html">http://www.freeformatter.com/json-validator.html</a>
	<br/>
	<a class="centrado" href="http://jsonlint.com/">http://jsonlint.com/</a>



<a id="CompXML"></a>
<br/>
<p class="Titulos">JSON vs XML</p>
<br/>
<p>Uno de los lenguajes de marcado m&aacute;s usados y extendidos es el XML (acr&oacute;nimo de eXtensible Markup Language),
por lo que es inevitable su comparaci&oacute;n frente a JSON.</p>

	<ul class="tablaComp">
		<li>A la hora de leer es mucho m&aacute;s sencillo de entender, ya que usa elementos m&aacute;s
		intuitivos y no tanta etiqueta como XML.</li>
		
		<li>Es m&aacute;s r&aacute;pido de escribir y leer para el programador y no tiene palabras
		reservadas que nececite aprender.</li>
		
		<li>XML es redundante debido a la apertura y cierre de etiquetas, elementos que se prescinden
		en JSON.</li>
		
		<li>Facilidad a la hora de realizar un parser sint&aacute;ctico de JSON, ya que tiene
		una estructura m&aacute;s simple de analizar.</li>
		
		<li>Hay una gran cantidad de librerias desarrollados para la mayor&iacute;a de lenguajes de
		programaci&oacute;n.</li>
		
		<li>La funci&oacute;n eval() de Javasript facilita el an&aacute;lisis de los datos marcados, por lo que la
		aceptaci&oacute;n en las comunidades web fue muy r&aacute;pido.</li>
		
		<li>Para aplicaciones AJAX, JSON es m&aacute; r&aacute;pido y sencillo que XML, ya que se necesita
		un XML DOM para el parseo de la informaci&oacute;n y almacenar los valores en variables, cosa que
		en JSON no es necesario.</li>
		
		<li>Una gran ventaja es que la forma de estructurar JSON es totalmente libre, a elección del que maneja
		esos datos seg&uacute;n crea conveniente. Pero si se quisiera, hay varios m&eacute;todos para cambiar 
		formato XML a JSON. Una opci&oacute;n es elegir cierta disposici&oacute;n de los elementos como se 
		indica en este art&iacute;culo <a href="http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html">
		http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html</a></li>
			
	</ul>
	
		<div id="imagenComp">
			<img src="images/compJson.png" alt="conversion"/>
			<span>
				<img src="images/compJson.png" alt="conversion" />
				Conversi&oacute;n JSON a XML
			</span>
		</div>		

		
		<p>Como se observa en la tabla, se decide cierta estructura que imita el XML, aunque habr&iacute;a
		muchas opciones de hacerlo.</p>


<a id="YAML"></a>
<br/>
<p class="Titulos">YAML, subconjunto de JSON</p>
<p>
&ldquo;YAML no es otro lenguaje de marcado&rdquo;(significado de su acr&oacute;nimo ingl&eacute;s). Se le di&oacute; este nombre 
para distinguir que se centra en el contenido de datos y no en el etiquetado en s&iacute;.

Se podr&iacute; decir que es un subconjunto de JSON ya que ambos comparten grandes similitudes, debido a su
naturaleza de lenguajes de marcado ligeros. Pero YAML supone la suma de nuevas funcionalidades como
listas y castings. Adem&aacute;s, los parseadores de YAML son v&aacute;lidos para JSON.

Para m&aacute;s informaci&oacute;n consultar <a href="http://www.yaml.org/">http://www.yaml.org/</a></p>

<br/>
<a id="JavaJson"></a>
<p class="Titulos">Java y Json</p>
<br/>

<p class="centrado">Existe m&uacute;ltiples librer&iacute;as para la serializaci&oacute;n de objetos Java en
formato JSON, y de esta forma poder tener el potencial de marcado de JSON en tus programas Java.

Una forma muy sencilla de usar JSON desde JAVA es gracias a la librer&iacute;a de Google llamada GSON
<a href="http://code.google.com/p/google-gson/">(http://code.google.com/p/google-gson/)</a></p>

<p>Este es un ejemplo de la serializaci&oacute;n a JSON de un objeto Ciudad:</p>

	<pre class="code">
		public class Ciudad {
		
			private String nombre;
			private int habitantes;
			/**
			* El constructor es obligatorio si queremos 
			* deserializar correctamente el response JSON
			*/
			public Ciudad(){
			}
			
			public String getNombre() {
				return nombre;
			}
			
			public void setNombre(String nombre) {
				this.nombre = nombre;
			}

			public int getHabitantes() {
				return habitantes;
			}
			
			public void setHabitantes(int habitantes) {
				this.habitantes = habitantes;
			}
		
		}	
	</pre>

	
	<p class="tituloSecundario">Se crea una instancia del objeto Ciudad: </p><br/>
	<pre class="code">
		
		Ciudad c = new Ciudad();
		c.setNombre("Madrid");
		c.setHabitantes(6500000);		
	
	</pre>
	<p class="tituloSecundario">Se usa la librer&iacute;a </p><br/>
	<pre class="code">
		Gson gson = new Gson();<br/>
		String jsonOutput = gson.toJson(c);<br/>		
	</pre>
	
	<p class="tituloSecundario">Obteniendo el objeto Java en una estructura JSON perfecta para almacenar
	en un server o en el lado del cliente. </p><br/>
	<p class="tituloSecundario">Y aqu&iacute;</p>
	<p class="code">
		jsonOutput: {“nombre”:”Madrid”,”habitantes”:6500000}<br/>
	</p>
	<br/>
	<p>Otro par de librer&iacute;s para serializar objetos desde Java a JSON son FLEXJSON y JSON-lib, cuyo uso
	es parecido a la librer&iacute;a GSON explicada arriba.
	Se deja al lector que investigue y pruebe para descubrir la que m&aacute;s se ajuste a sus necesidades:</p>
	<a class="centrado" href="http://flexjson.sourceforge.net/">http://flexjson.sourceforge.net/</a><br/>
	<a class="centrado" href="http://json-lib.sourceforge.net/">http://json-lib.sourceforge.net/</a><br/>
	<a class="centrado" href="http://www.json.org/java/">http://www.json.org/java/</a>
	
	<br/>

	<a name="Referencias"></a>
	<p class="Titulos">Referencias</p>

	<p class="referencias">
		Aqu&iacute; va una serie de webs consultadas para complementar la informaci&oacute;n sobre JSON:</p>
			<a class="centrado" href="http://www.json.org/" title="jsonORG">http://www.json.org/</a><br/>
			<a class="centrado" href="http://en.wikipedia.org/wiki/JSON">http://en.wikipedia.org/wiki/JSON</a><br/>
			<a class="centrado" href="http://www.freeformatter.com/json-validator.html">http://www.freeformatter.com/json-validator.html</a><br/>
			<a class="centrado" href="http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html">http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html</a><br/>
			<a class="centrado" href="http://www.w3schools.com/json/">http://www.w3schools.com/json/</a><br/>
			<a class="centrado" href="http://es.wikipedia.org/wiki/YAML">http://es.wikipedia.org/wiki/YAML</a><br/>
			<a class="centrado" href="http://www.blogdellamas.vacau.com/curso_ajax/lecciones/lecc25_ajax_framework_json.html">curso_ajax/lecciones/lecc25_ajax_framework_json.html</a><br/>

	<br/>
	<br/>
	
	</div><!-- cuerpo -->

	       <div id="pie"> 

	       		<a href="http://validator.w3.org/check?uri=referer">
	       		<img src="http://www.w3.org/Icons/valid-xhtml10" 
	      			 alt="Valid XHTML 1.0 Transitional" 
	      			 height="31" width="88" /></a>
	      			 
			    <a href="http://jigsaw.w3.org/css-validator/check/referer">
			        <img style="border:0;width:88px;height:31px"
			            src="http://jigsaw.w3.org/css-validator/images/vcss"
			            alt="¡CSS Válido!" />
			    </a>
       	       	
       	  </div>
       	  <br/>
       	 <div id="volver"> 

			<a href="#inicio">Volver al inicio de la p&aacute;gina</a>
			<br/><br/>
			
			<a href="/">Volver al main</a>
			
		</div>
		
		<p class="licencia">
		<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.es">
		<img alt="Licencia Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" />
		</a><br /><a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.es">
		Este obra está bajo una Licencia Creative Commons Atribución 3.0 Unported</a>
		</p>
		 <br/>
		
		
</div><!-- principal -->

</body>

</html>
